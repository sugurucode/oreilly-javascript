# 練習問題: 5 章

## 問題 5.1 💻

文ブロックを使って同じ関数内に同じ変数名の const を複数宣言する関数を書きなさい。

**出題範囲**: 5.2

## 問題 5.2 💻🧪

文字列のパラメータを取り、制御文字など文字列リテラル作成時エスケープシーケンスで記述する必要がある文字 (p37 表 3-1 の`\\`より上)を、エスケープシーケンスに変換した文字列を返すメソッドを書きなさい。例えば文字列中に`\`が含まれていたら、`\\`に変換しなさい。if-else で分岐するバージョンと switch で分岐するバージョンの両方を作りなさい。

**出題範囲**: 5.3, 5.4.4

## 問題 5.3 💻🧪🖋️

1. "Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"のいずれかの文字列リテラルを受け取って、その月の日数が31であれば true、そうでなければ false を返すメソッドを書きなさい。if-else を使うバージョンと switch を使うバージョンの両方を作りなさい。
2. if-else を使う場合と switch を使う場合で、それぞれ可読性に対してどのようなメリットがあるか書きなさい。

**出題範囲**: 5.3

## 問題 5.4 💻 🧪

初項と第 2 項を 1 とするフィボナッチ数列 (1, 1, 2, 3, ...) の最初の 10 個を配列として返す関数を、while 文によるループを使って書きなさい。

同様に、do/while 文を使って書きなさい。

同様に、for 文を使って書きなさい。

**出題範囲**: 5.4

## 問題 5.5 💻🧪

値が数値のプロパティを持つオブジェクトを引数に取り、偶数の値を持つプロパティだけを残した新しいオブジェクトを返す関数を作成しなさい。

```js
const o = { x: 1, y: 2, z: 3 };
console.log(f(o)); // { y: 2 }
console.log(o); // { x: 1, y: 2, z: 3 } 元のオブジェクトは変更しない
```

**出題範囲**: 5.4.4, 5.4.5

## 問題 5.6 💻

try-catch-finally の実行順序が確認できるコードを書きなさい。

**出題範囲**: 5.5.7

## 問題 5.7 🖋️

以下のプログラムの出力を予想し、実際の実行結果を確認しなさい。

```
function f() {
    try {
        return true;
    } finally {
        return false;
    }
}

console.log(f());
```

**出題範囲**: 5.5.7

## 問題 5.8 🖋️

以下のプログラムの出力を予想し、実際の実行結果を確認しなさい。

```
let x = 0;

for(let i = 1; i <= 5; i++) {
    x = i;
    try {
        throw Error();
    } catch {
        break;
    } finally {
        continue;
    }
}

console.log(x);
```

**出題範囲**: 5.5.7

## 問題 5.9 💻🧪

任意の文字列を引数にとり、その文字列が JSON としてパース出来る場合 `{success: true, data: <パースしたデータ>}`を返し、できない場合 `{success: false, error: <エラー内容>}` を返す関数を書きなさい

**出題範囲**: 5.5.7

## 問題 5.10 🖋️

書籍では `with` 文に関して「できるだけ使わないようにしたほうがよい」と記述されているが、`with` 文は使うべきではない (参考: [MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/with))。

`with` 文は最適化が難しくなるだけでなく混乱を招く可能性がある。
このことを理解するために以下の 4 ブロックを実行し、`console.log` の出力および `with` 文を使わずに同じ処理を書く場合にどのような文になるかを書きなさい。

```js
{
  let a = 1;
  let b = 2;
  let obj = { a: 3, b: 4 };
  with (obj) {
    a = b;
  }
  console.log({ a, b, obj });
  // console.log の出力: { a: 1, b: 2, obj: { a: 4, b: 4 }}
  // with 文を使わずに同じ処理を書く場合: obj.a = obj.b
}
{
  let a = 1;
  let b = 2;
  let obj = { b: 4 };
  with (obj) {
    a = b;
  }
  console.log({ a, b, obj });
}
{
  let a = 1;
  let b = 2;
  let obj = { a: 3 };
  with (obj) {
    a = b;
  }
  console.log({ a, b, obj });
}
{
  let a = 1;
  let b = 2;
  let obj = {};
  with (obj) {
    a = b;
  }
  console.log({ a, b, obj });
}
```

**出題範囲**: 5.6.1

## 問題 5.11 🖋️

Node で debugger 文を使ってデバッグする方法を調べなさい。

**出題範囲**: 5.6.2

## 問題 5.12 💻

非 strict モードでは動作するが strict モードでは動作しないプログラムを書き、それぞれ `not-strict.js`, `strict.js` として作成しなさい。
`strict.js` を変更することによって、strict モードでも動作するようにしたプログラム `strict-fixed.js` を作成しなさい。
ただし、拡張子 `.js` は必要があれば変更してよい。

**ヒント**:
package.json で `"type": "module"` が指定されている場合、Node 上では `.js` ファイルが常に strict モードで実行される。
非 strict モードで実行したい場合は `.js` ではなく `.cjs` ファイルとして作成するとよい。
他には `.html` ファイルとして作成してブラウザ上で実行する方法もある。

**出題範囲**: 5.6.3
