# 練習問題: 3 章

## 問題 3.1 💻

正負の ` Infinity` と `NaN` で `+`, `-`, `\*`, `/` の計算を全ての組み合わせでして結果を見なさい。

**出題範囲**: 3.2.3

## 問題 3.2 💻

JavaScript の整数の最大値と最小値をコンソールに出力しなさい。なお最大値最小値は ES6 の `Number` のプロパティ定義を利用しなさい (3.2.3 参照)。
同様に最大値+1 をコンソールに出力しなさい。
最後に最大値+1 と最大値+2 を `===` で比較した結果をコンソールに出力し、そのように出力される理由を簡潔に文章で記載しなさい。

**出題範囲**: 3.2.3

## 問題 3.3 💻🧪

2 個の数値を受け取り、それらの値が同値かどうかを判定する関数を作成しなさい。また、その動作を確認するテストを書きなさい。
（最低限、以下の組み合わせが動作することは確認すること。）

ただし、浮動小数点の誤差を考慮すること。ここでは `10^(-10)` 未満の誤差であれば要求される計算精度に影響はないと仮定します。

- `(0.3 - 0.2, 0.1) -> true`
- `(0.2 - 0.1, 0.1) -> true`

**出題範囲**: 3.2.4

## 問題 3.4 🧪

文字名 `"Hundred Points Symbol"` の絵文字表現 `"💯"` に対して `length` の値を確認するテストコードを書きなさい。
また、utf-16 コードポイント表現 `"\uD83D\uDCAF"`、utf-32 コードポイント表現 `"\u{0001F4AF}"` が絵文字と同値であることをテストコードで確認しなさい。

**出題範囲**: 3.3.2

## 問題 3.5 💻🧪

文字列中の改行コードを`LF`→`CR+LF`に変換する関数と`CR+LF`→`LF`に変換する関数をそれぞれ作成しなさい。
また、テストコードを書いて、それらの関数が正しく動作していることを確認しなさい。

**出題範囲**: 3.3.3

## 問題 3.6 💻📄

[String.prototype.slice()](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/slice) と同等の結果を返す関数を自作しなさい。
第一引数に対象の文字列を受け取り、第二引数以降に元のメソッドの第一引数以降を受け取るものとする。

[ex06/index.test.js](./ex06/index.test.js) のテストを全てパスするように index.js (または index.ts) を作成しなさい。

**出題範囲**: 3.3.3

## 問題 3.7 📄

JavaScript は動的な型付け言語だと言われる。
書籍 P48 の `equalArrays` は、引数に配列を受け取ることが想定されているが、実際には異なる型の値を渡すことも可能である (例えば `equalsArray("42", "A")` はエラーを返さず `false` を返す)。

では、2 つの値が等価性を満たしていないにも関わらず、 `equalsArray` の返り値が `true` になるような引数の例を作ることはできるだろうか。[ex07/index.test.js](./ex07/index.test.js) のテストが成功するような、任意の定数 `x`, `y` を実装しなさい。

**出題範囲**: 3.8

## 問題 3.8 💻

`Number()` 関数で `true`, `1234`, `"text"` をそれぞれ数値変換しコンソール出力しなさい。
同様に、`Boolean()` 関数で `1234`, `0` を真偽値変換、`String()` 関数で `true`, `1234` を文字列変換しなさい。
更に、`parseInt()` で `"12,742 km：地球の直径"`、 `parseFloat()` で `"1.618：黄金比"` を変換してコンソール出力しなさい。

**出題範囲**: 3.9.2

## 問題 3.9 📄

以下のテストがすべて成功するように `/* 左辺を埋める */` の部分にコードを記載しなさい。

```js
test("テスト名を適切につけてなさい", () => {
    let points = [{x:1, y:2}, {x:3, y:4}];
    /* 左辺を埋める */ = points;
    expect(x1).toBe(1);
    expect(y1).toBe(2);
    expect(x2).toBe(3);
    expect(y2).toBe(4);
});
```

**出題範囲**: 3.10.3

## 問題 3.10 💻

`Symbol()` を使い、同じ文字列から生成された 2 個の `Symbol` 変数を作成し、それらをプロパティとして持つオブジェクトを作成しなさい。
そのオブジェクトに対して、作成した`Symbol`変数を使って各プロパティの値を取得しなさい。
また、`Symbol()`ではなく、`Symbol.for()`で同名の変数を作成した場合の挙動を確認しなさい。

**出題範囲**: 3.6

## 問題 3.11 💻🧪

オブジェクトが可変であることと、オブジェクトが参照で比較されることを以下のコードを書いて確認しなさい:

```js
const obj1 = {x: 1};
// 問題: ここに1行コードを書くことで以下の行で {x: 1, y: 2} が出力されること
console.log(obj1);

const obj2 = {x: 1, y: 2};
// 問題: 以下の行では何が出力されるか、予想してから結果を確認しなさい
console.log(obj1 === obj2);
```

次に引数で与えられた2つのオブジェクト `o1` と `o2` を比較する関数 `equals` を以下の仕様に従って作成しなさい:

1. `o1` と `o2` が [厳密に等価](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Strict_equality) である場合 `true` を返す。
2. `o1` または `o2` に `null` またはオブジェクト以外が指定された場合 `false` を返す (`tyepof` の返り値が `object` かどうかを確認しなさい)
3. `o1` と `o2` のプロパティの数・名前が一致しない場合は `false` を返す
4. `o1` と `o2` のプロパティの各値を `equals` で比較し、全て `true` ならば `true` を返し、1つでも `false` があれば `false` を返す

参考: 以下の挙動を参考にしなさい:

```js
// 厳密等価なら true
equals(42, 42); // true
equals(null, null); // true

// 厳密等価ではない場合オブジェクト以外が指定されれば false
equals({x: 42}, 42); // false
equals(null, {x: 42}); // false

// プロパティの数・名前が一致しなければ false
equals({x: 1}, {y: 1}); // false
equals({x: 1}, {x: 1, y: 1}); // false

// プロパティの各値を equals で再帰的に比較
equals({x: {y: {z: 10}}}, {x: {y: {z: 10}}}); // true
equals({x: {y: {z: 10}}}, {x: {y: {z: 10, w: 1}}}); // false
```

**出題範囲**: 3.8

## 問題 3.12 💻

`valueOf()`, `toString()` を持つクラスを定義しなさい。
そのクラスのインスタンスを作成し、`valueOf()`, `toString()` を直接呼び出さずにそれぞれの結果を出力するコードを書きなさい。

クラス定義のサンプルコード

```js
class Example {
  valueOf() {
    // TODO
  }

  toString() {
    // TODO
  }
}

let obj = new Example();
```

**出題範囲**: 3.9.3.6

## 問題 3.13 💻📄💪

`==`, `<=`, の演算子と同等の挙動を取る関数 `eq` および `lte` を作成しなさい。

[ex13/index.test.js](./ex13/index.test.js) のテストを全てパスするように index.js (または index.ts)を作成しなさい。

3 章で説明されている各型 (ただし `BigInt` 及び `Symbol` は考慮しなくて良い) や自作クラスに対しても同等の挙動を取るようにしなさい。

作成する関数の内部実装については以下の条件に従いなさい。

- 同値演算子 `===` を利用して良い
- 基本型値同士の比較に関しては `<` 演算子を利用して良い
- 文字列を数値に変換するのに `Number()` を利用して良い
- 最新の ECMA の抽象関係比較アルゴリズムの仕様では、オブジェクト型値から基本型値への変換に `Symbol.ToPrimitive` を利用することになっているが、解答では書籍に記載された型変換アルゴリズムを利用すること

**出題範囲**: 3.9.3.4

## 問題 3.14 🖋

以下のコードを実行するとどのように表示されるか予想した後で実行しなさい。なぜそのような実行結果になったのか説明しなさい。

また、コード内の全ての `let` を `var` に変えた場合と、全ての `let` を消した場合 (非 `strict` モードでのみ実行可能) ではどうなるでしょうか。それら結果の理由についても説明しなさい。

```js
/* eslint-disable */
for (let i = 0; i < 10; i++) {
  (function () {
    let i = 100;
  })();
  console.log(i);
}
console.log(i);
```

**出題範囲**: 3.10.2
